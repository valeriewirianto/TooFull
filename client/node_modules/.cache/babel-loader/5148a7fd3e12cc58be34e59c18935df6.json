{"ast":null,"code":"import _defineProperty from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import\"./IndividualFriendsUserSetting.css\";import{uid}from'react-uid';// import {Link} from \"react-router-dom\";\nimport watermelon from'./Stickers/watermelon.png';import donut from'./Stickers/donut.png';import pie from'./Stickers/pie.png';import broccoli from'./Stickers/brocoli.png';import React from\"react\";import ReactHtmlParser from'react-html-parser';import{add_item,delete_list,get_all_items,modify_multiple_items,update_list_description}from\"./actions/myList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var IndividualList=/*#__PURE__*/function(_React$Component){_inherits(IndividualList,_React$Component);var _super=_createSuper(IndividualList);function IndividualList(){var _this;_classCallCheck(this,IndividualList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={ListName:\"Home Grown Ingredients\",Category:\"Ingredients\",ListDescription:\"My favourite ingredients that I grow in my garden\",FoodRank:[],seen:false,seen2:false,seen3:false,info:{},stickers:[{id:0,source:watermelon},{id:1,source:donut},{id:2,source:pie},{id:3,source:broccoli}],freeStickers:[],selectedImage:null};_this.removeFoodRank=function(Info){var filterFoodRank=_this.state.FoodRank.filter(function(check){return check!==Info;});filterFoodRank.map(function(R,index){return R.Rank=index+1;});_this.setState({FoodRank:filterFoodRank});};_this.deleteWholeList=function(){var listId=_this.props.location.state.listId;delete_list(listId).then(function(response){if(response===\"success\"){alert(\"List deleted!\");_this.props.history.push('/main');}});};_this.OpenClose=function(){_this.setState({seen:!_this.state.seen});};_this.OpenClose2=function(){_this.setState({seen2:!_this.state.seen2});};_this.OpenClose3=function(){_this.setState({seen3:!_this.state.seen3});};_this.editItem=function(PopUpState){var foodName=PopUpState.FoodName;var notes=PopUpState.Notes;var rank=PopUpState.Rank;var filterFoodRank=_this.state.FoodRank.filter(function(check){return check.Rank!==rank;});var editedItem={Rank:rank,FoodName:foodName,Notes:notes};filterFoodRank.splice(rank-1,0,editedItem);filterFoodRank.map(function(R,index){return R.Rank=index+1;});_this.setState({FoodRank:filterFoodRank});_this.OpenClose2();};_this.addNewItem=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(PopUpState){var listId,foodName,rank,note,newItem,afterNewItem;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:listId=_this.props.location.state.listId;foodName=PopUpState.FoodName;rank=PopUpState.Rank;if(rank<1){rank=1;}else if(rank>_this.state.FoodRank.length+1){rank=_this.state.FoodRank.length;}note=PopUpState.Note;newItem={rank:rank,foodName:foodName,notes:note};// Find all items where rank is greater than current item rank just added\nafterNewItem=_this.state.FoodRank.filter(function(item){return item.rank>=newItem.rank;});// Add new item and update current FoodRank\n// List may have duplicate ranks\n_context.next=9;return add_item(_assertThisInitialized(_this),newItem,listId);case 9:console.log(_this.state.FoodRank);// Modify all items where rank is greater than item rank just added\nconsole.log(afterNewItem);modify_multiple_items(_assertThisInitialized(_this),old,listId);//const old = this.state.FoodRank\n//old.splice(rank - 1,0, newItem)\n// old.map((R, index)=> R.rank = index + 1)\n// console.log(newItem)\n//console.log(old)\n//console.log(this.state.FoodRank)\n// this.setState(\n//     {\n//         FoodRank: old\n//     }\n// )\n_this.OpenClose();case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.editDescription=function(description){_this.setState({ListDescription:description});var listId=_this.props.location.state.listId;update_list_description(listId,description);_this.OpenClose3();};_this.changeEditingRank=function(Info){_this.setState({info:Info});_this.OpenClose2();};_this.click=function(event){var target=event.target;var type=target.type;var className=target.className;if(className==='freeSticker'){var targetID=target.id;_this.deleteFreeSticker(targetID);}if(type!=='button'&&_this.state.selectedImage!=null&&className!=='sticker'){var x=event.clientX;var y=event.clientY;var length=_this.state.freeStickers.length;var ID=0;if(length!==0){ID=_this.state.freeStickers[length-1].id+1;}var freeSticker={id:ID,location:[x,y],source:_this.state.selectedImage};var existingFreeStickers=_this.state.freeStickers;existingFreeStickers.push(freeSticker);_this.setState({freeStickers:existingFreeStickers,selectedImage:null});}};_this.selectImage=function(event){event.preventDefault();console.log(\"I am selecting a sticker\");var target=event.target;var source=target.src;console.log(source);_this.setState({selectedImage:source});};return _this;}_createClass(IndividualList,[{key:\"componentDidMount\",value:function componentDidMount(props){var listId=this.props.location.state.listId;get_all_items(this,listId);}},{key:\"ListDescription\",value:function ListDescription(){return/*#__PURE__*/_jsxs(\"div\",{id:\"ListDescription\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"List Description\"}),/*#__PURE__*/_jsx(\"p\",{children:this.state.ListDescription})]});}},{key:\"Header\",value:function Header(){return/*#__PURE__*/_jsxs(\"div\",{id:\"HeaderIndividualList\",children:[/*#__PURE__*/_jsx(\"h1\",{children:this.state.ListName+\"(\"+this.state.Category+\")\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"AddNewItem\",onClick:this.OpenClose,children:\" Add a new list item\"}),this.state.seen?/*#__PURE__*/_jsx(NewRankPopup,{addNewItem:this.addNewItem,OpenClose:this.OpenClose}):null,this.state.seen2?/*#__PURE__*/_jsx(EditRankPopup,{OpenClose:this.OpenClose2,Info:this.state.info,editItem:this.editItem}):null,this.state.seen3?/*#__PURE__*/_jsx(EditDescription,{editDescription:this.editDescription,OpenClose:this.OpenClose3,Description:this.state.ListDescription}):null,/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"DeleteWholeList\",onClick:this.deleteWholeList,children:\" Delete the whole list \"}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"EditDescription\",onClick:this.OpenClose3,children:\" Edit Description \"})]});}},{key:\"TableRow\",value:function TableRow(info){var _this2=this;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:info.rank})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:info.foodName})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:info.notes})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"editIndividualList\",onClick:function onClick(){return _this2.changeEditingRank(info);},children:\" edit \"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"deleteIndividualList\",onClick:function onClick(){return _this2.removeFoodRank(info);},children:\" delete \"})})]},uid(info));}},{key:\"Table\",value:function Table(){var _this3=this;return/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Rank\"}),/*#__PURE__*/_jsx(\"th\",{children:\"FoodName\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Notes\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]}),this.state.FoodRank.map(function(info){return _this3.TableRow(info);})]})});}},{key:\"deleteFreeSticker\",value:function deleteFreeSticker(id){console.log(\"Deleteing\");var freeStickers=this.state.freeStickers;var filtered=freeStickers.filter(function(fs){return fs.id.toString()!==id;});console.log(filtered);this.setState({freeStickers:filtered});}},{key:\"freeSticker\",value:function freeSticker(fs){var id=fs.id;var stringID=id.toString();var source=fs.source;var x=fs.location[0];var y=fs.location[1];var left=x-25+'px';var top=y-25+'px';var sticker=document.createElement(\"IMG\");sticker.src=source;sticker.alt=\"iamge not found\";sticker.key=uid(fs);sticker.id=stringID;sticker.className='freeSticker';sticker.style.left=left;sticker.style.top=top;sticker.style.position=\"absolute\";return ReactHtmlParser(sticker.outerHTML);}},{key:\"FreeStickers\",value:function FreeStickers(){var _this4=this;var freeStickers=this.state.freeStickers;return/*#__PURE__*/_jsx(\"div\",{children:freeStickers.map(function(fs){return _this4.freeSticker(fs);})});}},{key:\"sticker\",value:function sticker(s){return/*#__PURE__*/_jsxs(\"div\",{className:\"stickerDiv\",children:[/*#__PURE__*/_jsx(\"img\",{src:this.state.stickers[s.id].source,alt:\"No image\",className:\"sticker\",onClick:this.selectImage}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"})]},uid(s));}},{key:\"StickerList\",value:function StickerList(){var _this5=this;return/*#__PURE__*/_jsx(\"div\",{className:\"stickerList\",children:this.state.stickers.map(function(s){return _this5.sticker(s);})});}},{key:\"StickerPanel\",value:function StickerPanel(){return/*#__PURE__*/_jsxs(\"div\",{className:\"StickerPanel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Choose Your Stickers\"}),/*#__PURE__*/_jsx(\"p\",{children:\" Choose by clicking the image and the position that the sticker should go and deleting by clicking again\"}),this.StickerList(),/*#__PURE__*/_jsx(\"p\",{children:\"Stickers can only go to the header, List Description, item table and sticker panel\"})]});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{onClick:this.click,children:[/*#__PURE__*/_jsx(\"hr\",{}),this.Header(),/*#__PURE__*/_jsx(\"br\",{}),this.Table(),this.ListDescription(),this.StickerPanel(),this.FreeStickers()]});}}]);return IndividualList;}(React.Component);var NewRankPopup=/*#__PURE__*/function(_React$Component2){_inherits(NewRankPopup,_React$Component2);var _super2=_createSuper(NewRankPopup);function NewRankPopup(){var _this6;_classCallCheck(this,NewRankPopup);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this6=_super2.call.apply(_super2,[this].concat(args));_this6.state={FoodName:\"\",Rank:\"\",Note:\"\"};_this6.handleChange=function(event){var target=event.target;var value=target.value;var name=target.name;_this6.setState(_defineProperty({},name,value));};return _this6;}_createClass(NewRankPopup,[{key:\"FoodNameForm\",value:function FoodNameForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"FoodNameForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Food Name:  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"FoodName\",value:this.state.FoodName,onChange:this.handleChange,className:\"FoodNameInputBox\"})]})});}},{key:\"RankForm\",value:function RankForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"RankForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rank:                      \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"Rank\",value:this.state.rank,className:\"RankInputBox\",onChange:this.handleChange})]})});}},{key:\"NoteForm\",value:function NoteForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"NoteForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:  \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"Note\",value:this.state.Note,className:\"NoteInputBox\",onChange:this.handleChange,rows:\"5\",cols:\"10\",wrap:\"soft\"})]})});}},{key:\"Header\",value:function Header(){return/*#__PURE__*/_jsx(\"div\",{className:\"PopUpWindowHeader\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Add a new Item to the list\"})});}},{key:\"render\",value:function render(){var _this7=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"PopUpWindow\",children:[this.Header(),/*#__PURE__*/_jsx(\"br\",{}),this.FoodNameForm(),/*#__PURE__*/_jsx(\"br\",{}),this.RankForm(),/*#__PURE__*/_jsx(\"br\",{}),this.NoteForm(),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ButtonArray\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return _this7.props.addNewItem(_this7.state);},children:\"submit\"}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.props.OpenClose,children:\" Cancel \"})]})]});}}]);return NewRankPopup;}(React.Component);var EditRankPopup=/*#__PURE__*/function(_React$Component3){_inherits(EditRankPopup,_React$Component3);var _super3=_createSuper(EditRankPopup);function EditRankPopup(){var _this8;_classCallCheck(this,EditRankPopup);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}_this8=_super3.call.apply(_super3,[this].concat(args));_this8.state={FoodName:_this8.props.Info.FoodName,Notes:_this8.props.Info.Notes,Rank:_this8.props.Info.Rank};_this8.handleChange=function(event){var target=event.target;var value=target.value;var name=target.name;_this8.setState(_defineProperty({},name,value));};return _this8;}_createClass(EditRankPopup,[{key:\"Header\",value:function Header(){return/*#__PURE__*/_jsx(\"div\",{className:\"PopUpWindowHeader\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Edit this item\"})});}},{key:\"NoteForm\",value:function NoteForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"NoteForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:  \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"Notes\",value:this.state.Notes,className:\"NoteInputBox\",onChange:this.handleChange,rows:\"5\",cols:\"10\",wrap:\"soft\"})]})});}},{key:\"FoodNameForm\",value:function FoodNameForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"FoodNameForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Food Name:  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"FoodName\",value:this.state.FoodName,onChange:this.handleChange,className:\"FoodNameInputBox\"})]})});}},{key:\"render\",value:function render(){var _this9=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"PopUpWindow\",children:[this.Header(),/*#__PURE__*/_jsx(\"br\",{}),this.FoodNameForm(),/*#__PURE__*/_jsx(\"br\",{}),this.NoteForm(),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ButtonArray\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return _this9.props.editItem(_this9.state);},children:\"submit\"}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.props.OpenClose,children:\" Cancel \"})]})]});}}]);return EditRankPopup;}(React.Component);var EditDescription=/*#__PURE__*/function(_React$Component4){_inherits(EditDescription,_React$Component4);var _super4=_createSuper(EditDescription);function EditDescription(){var _this10;_classCallCheck(this,EditDescription);for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}_this10=_super4.call.apply(_super4,[this].concat(args));_this10.state={Description:_this10.props.Description};_this10.handleChange=function(event){var target=event.target;var value=target.value;var name=target.name;_this10.setState(_defineProperty({},name,value));};return _this10;}_createClass(EditDescription,[{key:\"Header\",value:function Header(){return/*#__PURE__*/_jsx(\"div\",{className:\"PopUpWindowHeader\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Edit List Description\"})});}},{key:\"DescriptionForm\",value:function DescriptionForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"DescriptionForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"New description:  \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"Description\",value:this.state.description,onChange:this.handleChange,className:\"DescriptionInputBox\",rows:\"5\",cols:\"10\",wrap:\"soft\",children:\" \"})]})});}},{key:\"render\",value:function render(){var _this11=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"PopUpWindow\",children:[this.Header(),/*#__PURE__*/_jsx(\"br\",{}),this.DescriptionForm(),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ButtonArray\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return _this11.props.editDescription(_this11.state.Description);},children:\"submit\"}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.props.OpenClose,children:\" Cancel \"})]})]});}}]);return EditDescription;}(React.Component);export default IndividualList;","map":{"version":3,"sources":["/Users/valeriewirianto/University Stuff/309/Group/team50/client/src/IndividualList.js"],"names":["uid","watermelon","donut","pie","broccoli","React","ReactHtmlParser","add_item","delete_list","get_all_items","modify_multiple_items","update_list_description","IndividualList","state","ListName","Category","ListDescription","FoodRank","seen","seen2","seen3","info","stickers","id","source","freeStickers","selectedImage","removeFoodRank","Info","filterFoodRank","filter","check","map","R","index","Rank","setState","deleteWholeList","listId","props","location","then","response","alert","history","push","OpenClose","OpenClose2","OpenClose3","editItem","PopUpState","foodName","FoodName","notes","Notes","rank","editedItem","splice","addNewItem","length","note","Note","newItem","afterNewItem","item","console","log","old","editDescription","description","changeEditingRank","click","event","target","type","className","targetID","deleteFreeSticker","x","clientX","y","clientY","ID","freeSticker","existingFreeStickers","selectImage","preventDefault","src","TableRow","filtered","fs","toString","stringID","left","top","sticker","document","createElement","alt","key","style","position","outerHTML","s","StickerList","Header","Table","StickerPanel","FreeStickers","Component","NewRankPopup","handleChange","value","name","FoodNameForm","RankForm","NoteForm","EditRankPopup","EditDescription","Description","DescriptionForm"],"mappings":"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","sourcesContent":["import \"./IndividualFriendsUserSetting.css\";\nimport {uid} from 'react-uid';\n// import {Link} from \"react-router-dom\";\nimport watermelon from './Stickers/watermelon.png'\nimport donut from './Stickers/donut.png'\nimport pie from './Stickers/pie.png'\nimport broccoli from './Stickers/brocoli.png'\nimport React from \"react\";\nimport ReactHtmlParser from 'react-html-parser';\nimport { add_item, delete_list, get_all_items, modify_multiple_items, update_list_description } from \"./actions/myList\";\nclass IndividualList extends React.Component{\n\n    state = {\n        ListName: \"Home Grown Ingredients\",\n        Category: \"Ingredients\",\n        ListDescription: \"My favourite ingredients that I grow in my garden\",\n        FoodRank: [],\n        seen: false,\n        seen2: false,\n        seen3: false,\n        info: {},\n        stickers: [{id:0, source: watermelon}, {id: 1, source: donut}, {id:2, source: pie}, {id: 3, source: broccoli}],\n        freeStickers: [],\n        selectedImage : null\n    }\n\n    componentDidMount(props){\n        const { listId } = this.props.location.state\n        get_all_items (this, listId)\n    }\n\n    ListDescription(){\n        return(\n            <div id='ListDescription'>\n                <h2>List Description</h2>\n                <p>{this.state.ListDescription}</p>\n            </div>\n        )\n    }\n\n    removeFoodRank = (Info) => {\n        let filterFoodRank = this.state.FoodRank.filter(\n            (check) =>{\n                return check !== Info\n            }\n        )\n\n        filterFoodRank.map((R, index)=> R.Rank = index + 1)\n\n        this.setState(\n            {\n                FoodRank: filterFoodRank\n            }\n        )\n    }\n\n    deleteWholeList = ()=>{\n        const { listId } = this.props.location.state\n        delete_list(listId).then(response =>{\n            if(response === \"success\"){\n                alert(\"List deleted!\")\n                this.props.history.push('/main')\n            }\n        })\n    }\n\n    OpenClose =()=>{\n        this.setState({\n            seen: !this.state.seen\n        })\n    }\n\n    OpenClose2 =()=>{\n        this.setState({\n            seen2: !this.state.seen2\n        })\n    }\n\n    OpenClose3 =()=>{\n        this.setState({\n            seen3: !this.state.seen3\n        })\n    }\n\n    editItem = (PopUpState)=>{\n        const foodName = PopUpState.FoodName\n        const notes = PopUpState.Notes\n        const rank = PopUpState.Rank\n\n        let filterFoodRank = this.state.FoodRank.filter(\n            (check) =>{\n                return check.Rank !== rank\n            }\n        )\n\n        const editedItem = {\n            Rank: rank,\n            FoodName: foodName,\n            Notes: notes\n        }\n\n        filterFoodRank.splice(rank - 1,0, editedItem)\n        filterFoodRank.map((R, index)=> R.Rank = index + 1)\n        this.setState(\n            {\n                FoodRank: filterFoodRank\n            }\n        )\n\n        this.OpenClose2()\n\n\n    }\n\n    addNewItem = async (PopUpState)=>{\n       \n        const { listId } = this.props.location.state\n        const foodName = PopUpState.FoodName\n        let rank = PopUpState.Rank\n        if (rank < 1){\n            rank = 1\n        }else if(rank > this.state.FoodRank.length + 1){\n            rank = this.state.FoodRank.length\n        }\n\n        const note = PopUpState.Note\n        const newItem = {\n            rank: rank,\n            foodName: foodName,\n            notes: note\n        }\n\n        // Find all items where rank is greater than current item rank just added\n        const afterNewItem = this.state.FoodRank.filter(item => item.rank >= newItem.rank)\n\n        // Add new item and update current FoodRank\n        // List may have duplicate ranks\n        await add_item(this, newItem, listId)\n        console.log(this.state.FoodRank)\n\n        // Modify all items where rank is greater than item rank just added\n        console.log(afterNewItem)\n        modify_multiple_items(this, old, listId)\n\n        \n        //const old = this.state.FoodRank\n        //old.splice(rank - 1,0, newItem)\n       // old.map((R, index)=> R.rank = index + 1)\n       // console.log(newItem)\n        //console.log(old)\n\n\n        //console.log(this.state.FoodRank)\n\n\n        // this.setState(\n        //     {\n        //         FoodRank: old\n        //     }\n        // )\n        this.OpenClose()\n    }\n\n    editDescription = (description) => {\n        this.setState(\n            {\n                ListDescription: description\n            }\n        )\n        const { listId } = this.props.location.state\n        update_list_description(listId, description)\n        this.OpenClose3()\n    }\n\n    Header(){\n        return(\n            <div id='HeaderIndividualList'>\n                <h1>{this.state.ListName + \"(\" + this.state.Category + \")\"}</h1>\n                <button type=\"button\" className='AddNewItem' onClick={this.OpenClose}> Add a new list item</button>\n                {this.state.seen ? <NewRankPopup addNewItem={this.addNewItem} OpenClose={this.OpenClose} /> : null}\n                {this.state.seen2 ? <EditRankPopup OpenClose={this.OpenClose2} Info= {this.state.info}\n                                                   editItem={this.editItem}\n                /> : null}\n                {this.state.seen3 ? <EditDescription editDescription={this.editDescription} OpenClose={this.OpenClose3}\n                                                     Description = {this.state.ListDescription}\n                /> : null}\n                <span className='EmptySpace'> </span>\n                <button type=\"button\" className='DeleteWholeList' onClick={this.deleteWholeList}> Delete the whole list </button>\n                <span className='EmptySpace'> </span>\n\n                <button type=\"button\" className='EditDescription' onClick={(this.OpenClose3)}> Edit Description </button>\n\n            </div>\n        )\n    }\n\n\n    changeEditingRank = (Info)=> {\n        this.setState(\n            {\n                info: Info\n            }\n        )\n        this.OpenClose2()\n    }\n\n    TableRow(info){\n        return(\n            <tr key={uid(info)}>\n                <td>\n                    <strong>{info.rank}</strong>\n                </td>\n                <td>\n                    <strong>{info.foodName}</strong>\n                </td>\n                <td>\n                    <strong>{info.notes}</strong>\n                </td>\n                <td>\n                    <button type=\"button\" className='editIndividualList'\n                            onClick={() => this.changeEditingRank(info)}\n                    > edit </button>\n                </td>\n                <td>\n                    <button type=\"button\" className='deleteIndividualList'\n                            onClick = {\n                                () => this.removeFoodRank(info)\n                            }\n                    > delete </button>\n                </td>\n            </tr>\n        )\n    }\n\n\n    Table(){\n        return(\n            <table>\n                <tbody>\n                <tr>\n                    <th>Rank</th>\n                    <th>FoodName</th>\n                    <th>Notes</th>\n                    <th>Edit</th>\n                    <th>Delete</th>\n                </tr>\n                {this.state.FoodRank.map(info => {return this.TableRow(info)})}\n                </tbody>\n            </table>\n        )\n    }\n\n\n\n\n    deleteFreeSticker(id){\n        console.log(\"Deleteing\")\n        const freeStickers = this.state.freeStickers\n        let filtered = freeStickers.filter(fs => fs.id.toString() !== id)\n        console.log(filtered)\n        this.setState({\n            freeStickers: filtered\n        })\n    }\n\n\n\n    click = (event)=>{\n        const target = event.target\n        const type = target.type\n        const className = target.className\n\n        if(className === 'freeSticker'){\n            const targetID = target.id\n            this.deleteFreeSticker(targetID)\n        }\n\n        if (type !== 'button' && this.state.selectedImage != null && className !== 'sticker'){\n            let x = event.clientX\n            let y = event.clientY\n            const length = this.state.freeStickers.length\n            let ID = 0\n            if (length !== 0){\n                ID = this.state.freeStickers[length - 1].id + 1\n            }\n            const freeSticker = {\n                id: ID,\n                location: [x, y],\n                source: this.state.selectedImage\n            }\n            let existingFreeStickers = this.state.freeStickers\n            existingFreeStickers.push(freeSticker)\n            this.setState({\n                freeStickers: existingFreeStickers,\n                selectedImage: null\n\n            })\n\n        }\n    }\n\n    freeSticker(fs) {\n        const id = fs.id\n        const stringID = id.toString()\n        const source = fs.source\n        const x = fs.location[0]\n        const y = fs.location[1]\n        let left = (x - 25)+ 'px';\n        let top = (y - 25) + 'px';\n        let sticker = document.createElement(\"IMG\");\n        sticker.src =source\n        sticker.alt = \"iamge not found\"\n        sticker.key = uid(fs)\n        sticker.id = stringID\n        sticker.className = 'freeSticker'\n        sticker.style.left = left\n        sticker.style.top = top\n        sticker.style.position = \"absolute\"\n\n        return (\n            ReactHtmlParser(sticker.outerHTML)\n        )\n\n    }\n\n    FreeStickers(){\n        const freeStickers = this.state.freeStickers\n        return(\n                <div>\n                    { freeStickers.map(fs => this.freeSticker(fs))}\n                </div>\n\n\n                )\n    }\n\n    selectImage= (event)=> {\n        event.preventDefault()\n        console.log(\"I am selecting a sticker\")\n        const target = event.target\n        const source = target.src\n        console.log(source)\n        this.setState({\n            selectedImage: source\n        })\n\n\n    }\n\n    sticker(s){\n\n        return(\n            <div className='stickerDiv' key={uid(s)}>\n                <img src={this.state.stickers[s.id].source } alt='No image'  className='sticker'\n                     onClick={this.selectImage}/>\n                <span className='EmptySpace'> </span>\n            </div>\n\n        )\n    }\n\n\n\n\n\n    StickerList(){\n        return(\n            <div className='stickerList'>\n                {this.state.stickers.map(s => this.sticker(s))}\n\n            </div>\n\n        )\n    }\n\n\n\n    StickerPanel(){\n        return(\n            <div className='StickerPanel'>\n                <h2> Choose Your Stickers</h2>\n                <p> Choose by clicking the image and the position that the sticker should go and deleting by clicking again</p>\n                {this.StickerList()}\n                <p>Stickers can only go to the header, List Description, item table and sticker panel</p>\n            </div>\n        )\n    }\n\n\n\n    render() {\n        return(\n            <div onClick={this.click}>\n                {/*<Link to={'/Main'}>*/}\n                {/*    <div><button className='back'>Back</button></div>*/}\n                {/*</Link>*/}\n                <hr/>\n                {this.Header()}\n                <br/>\n\n                {this.Table()}\n                {this.ListDescription()}\n                {this.StickerPanel()}\n                {this.FreeStickers()}\n\n            </div>\n        )\n    }\n}\n\nclass NewRankPopup extends React.Component{\n    state = {\n        FoodName: \"\",\n        Rank: \"\",\n        Note: \"\"\n    }\n\n    handleChange = (event) => {\n        const target = event.target\n        const value = target.value\n        const name = target.name\n\n        this.setState({\n            [name]: value\n        })\n    }\n\n    FoodNameForm(){\n        return(\n            <form className=\"FoodNameForm\">\n                <label>\n                    <strong>Food Name:  </strong>\n                    <input type=\"text\" name=\"FoodName\" value = {this.state.FoodName}\n                           onChange={this.handleChange} className=\"FoodNameInputBox\"\n                    />\n                </label>\n            </form>\n        )\n    }\n\n    RankForm(){\n        return(\n            <form className=\"RankForm\">\n                <label>\n                    <strong>{\"Rank:                      \"}</strong>\n                    <input type=\"text\" name=\"Rank\" value = {this.state.rank} className=\"RankInputBox\"\n                           onChange={this.handleChange}\n                    />\n                </label>\n            </form>\n        )\n    }\n    NoteForm(){\n        return(\n            <form className=\"NoteForm\">\n                <label>\n                    <strong>Note:  </strong>\n                    <br/>\n                    <textarea  name=\"Note\" value = {this.state.Note} className=\"NoteInputBox\"\n                               onChange={this.handleChange} rows=\"5\" cols=\"10\" wrap=\"soft\">\n                    </textarea>\n                </label>\n            </form>\n        )\n    }\n\n    Header(){\n        return(\n            <div className=\"PopUpWindowHeader\">\n                <h2>Add a new Item to the list</h2>\n            </div>\n\n        )\n    }\n\n\n\n    render(){\n        return(\n            <div className=\"PopUpWindow\">\n                {this.Header()}\n                <br />\n                {this.FoodNameForm()}\n                <br />\n                {this.RankForm()}\n                <br />\n                {this.NoteForm()}\n                <br />\n                <div className=\"ButtonArray\">\n                    <button type=\"button\" onClick={()=>this.props.addNewItem(this.state)}>submit</button>\n                    <span className='EmptySpace'> </span>\n                    <button type=\"button\" onClick={this.props.OpenClose}> Cancel </button>\n                </div>\n\n            </div>\n    )\n    }\n}\n\nclass EditRankPopup extends React.Component{\n    state = {\n        FoodName: this.props.Info.FoodName,\n        Notes: this.props.Info.Notes,\n        Rank: this.props.Info.Rank\n    }\n    handleChange = (event) => {\n        const target = event.target\n        const value = target.value\n        const name = target.name\n\n        this.setState({\n            [name]: value\n        })\n    }\n\n    Header(){\n        return(\n            <div className=\"PopUpWindowHeader\">\n                <h2>Edit this item</h2>\n            </div>\n\n        )\n    }\n\n    NoteForm(){\n        return(\n            <form className=\"NoteForm\">\n                <label>\n                    <strong>Note:  </strong>\n                    <br/>\n                    <textarea name=\"Notes\" value = {this.state.Notes} className=\"NoteInputBox\"\n                                          onChange={this.handleChange} rows=\"5\" cols=\"10\" wrap=\"soft\">\n                    </textarea>\n                </label>\n            </form>\n        )\n    }\n\n    FoodNameForm(){\n        return(\n            <form className=\"FoodNameForm\">\n                <label>\n                    <strong>Food Name:  </strong>\n                    <input type=\"text\" name=\"FoodName\" value = {this.state.FoodName}\n                           onChange={this.handleChange} className=\"FoodNameInputBox\"\n                    />\n                </label>\n            </form>\n        )\n    }\n\n    render(){\n        return(\n            <div className=\"PopUpWindow\">\n                {this.Header()}\n                <br />\n                {this.FoodNameForm()}\n                <br />\n                {this.NoteForm()}\n                <br />\n                <div className=\"ButtonArray\">\n                    <button type=\"button\" onClick={()=>this.props.editItem(this.state)}>submit</button>\n                    <span className='EmptySpace'> </span>\n                    <button type=\"button\" onClick={this.props.OpenClose}> Cancel </button>\n                </div>\n            </div>\n        )\n    }\n}\n\nclass EditDescription extends React.Component{\n    state = {\n        Description: this.props.Description\n    }\n\n    handleChange = (event) => {\n        const target = event.target\n        const value = target.value\n        const name = target.name\n\n        this.setState({\n            [name]: value\n        })\n    }\n\n    Header(){\n        return(\n            <div className=\"PopUpWindowHeader\">\n                <h2>Edit List Description</h2>\n            </div>\n        )\n    }\n\n    DescriptionForm(){\n        return(\n            <form className=\"DescriptionForm\">\n                <label>\n                    <strong>New description:  </strong>\n                    <br/>\n                    <br/>\n                    <textarea name=\"Description\" value = {this.state.description}\n                              onChange={this.handleChange} className=\"DescriptionInputBox\" rows=\"5\" cols=\"10\" wrap=\"soft\"> </textarea>\n                </label>\n            </form>\n        )\n    }\n\n    render() {\n        return(\n            <div className=\"PopUpWindow\">\n                {this.Header()}\n                <br />\n                {this.DescriptionForm()}\n                <br />\n                <div className=\"ButtonArray\">\n                    <button type=\"button\" onClick={()=>this.props.editDescription(this.state.Description)}>submit</button>\n                    <span className='EmptySpace'> </span>\n                    <button type=\"button\" onClick={this.props.OpenClose}> Cancel </button>\n                </div>\n            </div>\n        )\n    }\n\n}\n\n\nexport default IndividualList;"]},"metadata":{},"sourceType":"module"}