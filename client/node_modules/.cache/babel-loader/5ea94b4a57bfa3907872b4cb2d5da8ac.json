{"ast":null,"code":"import _defineProperty from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import\"./IndividualFriendsUserSetting.css\";import{uid}from'react-uid';// import {Link} from \"react-router-dom\";\nimport watermelon from'./Stickers/watermelon.png';import donut from'./Stickers/donut.png';import pie from'./Stickers/pie.png';import broccoli from'./Stickers/brocoli.png';import React from\"react\";import ReactHtmlParser from'react-html-parser';import NavigationBar from'./NavigationBar';import{add_item,delete_list,get_all_items,delete_item,edit_item,update_list_description}from\"./actions/myList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var IndividualList=/*#__PURE__*/function(_React$Component){_inherits(IndividualList,_React$Component);var _super=_createSuper(IndividualList);function IndividualList(){var _this;_classCallCheck(this,IndividualList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={ListName:\"Home Grown Ingredients\",Category:\"Ingredients\",ListDescription:\"My favourite ingredients that I grow in my garden\",FoodRank:[],seen:false,seen2:false,seen3:false,info:{},stickers:[{id:0,source:watermelon},{id:1,source:donut},{id:2,source:pie},{id:3,source:broccoli}],freeStickers:[],selectedImage:null,user:null};_this.removeFoodRank=function(Info){delete_item(_this.state.listId,Info._id).then(function(response){var filterFoodRank=_this.state.FoodRank.filter(function(check){return check!==Info;});filterFoodRank.map(function(R,index){return R.Rank=index+1;});_this.setState({FoodRank:filterFoodRank});});};_this.deleteWholeList=function(){delete_list(_this.state.listId).then(function(response){if(response===\"success\"){alert(\"List deleted!\");_this.props.history.push('/main');}});};_this.OpenClose=function(){_this.setState({seen:!_this.state.seen});};_this.OpenClose2=function(){_this.setState({seen2:!_this.state.seen2});};_this.OpenClose3=function(){_this.setState({seen3:!_this.state.seen3});};_this.editItem=function(PopUpState){var foodName=PopUpState.FoodName;var notes=PopUpState.Notes;var rank=PopUpState.Rank;var filterFoodRank=_this.state.FoodRank.filter(function(check){return check.Rank!==rank;});var editedItem={Rank:rank,FoodName:foodName,Notes:notes};filterFoodRank.splice(rank-1,0,editedItem);filterFoodRank.map(function(R,index){return R.Rank=index+1;});_this.setState({FoodRank:filterFoodRank});// edit_item(this.state.listId, Info._id, PopUpState.FoodName, PopUpState.Notes).then(response =>{\n// })\n_this.OpenClose2();};_this.addNewItem=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(PopUpState){var foodName,rank,note,newItem;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:foodName=PopUpState.FoodName;rank=PopUpState.Rank;// Basic error handling\nif(!(PopUpState.FoodName===\"\"||PopUpState.Rank===\"\"||PopUpState.Note===\"\")){_context.next=5;break;}alert(\"Please input a value for all fields\");return _context.abrupt(\"return\");case 5:if(!(PopUpState.Rank<1)){_context.next=8;break;}alert(\"Please enter an integer for rank greater than 0\");return _context.abrupt(\"return\");case 8:// rank greater than  MAX rank in current list\nif(_this.state.FoodRank.length===0){}else if(rank>_this.state.FoodRank[_this.state.FoodRank.length-1].rank){rank=_this.state.FoodRank[_this.state.FoodRank.length-1].rank+1;}note=PopUpState.Note;newItem={rank:rank,foodName:foodName,notes:note};// Add new item and update current FoodRank\n_context.next=13;return add_item(_assertThisInitialized(_this),newItem,_this.state.listId);case 13:_this.OpenClose();case 14:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.editDescription=function(description){update_list_description(_this.state.listId,description).then(function(res){_this.setState({ListDescription:description});});_this.OpenClose3();};_this.changeEditingRank=function(Info){_this.setState({info:Info});_this.OpenClose2();};_this.click=function(event){var target=event.target;var type=target.type;var className=target.className;if(className==='freeSticker'){var targetID=target.id;_this.deleteFreeSticker(targetID);}if(type!=='button'&&_this.state.selectedImage!=null&&className!=='sticker'){var x=event.clientX;var y=event.clientY;var length=_this.state.freeStickers.length;var ID=0;if(length!==0){ID=_this.state.freeStickers[length-1].id+1;}var freeSticker={id:ID,location:[x,y],source:_this.state.selectedImage};var existingFreeStickers=_this.state.freeStickers;existingFreeStickers.push(freeSticker);_this.setState({freeStickers:existingFreeStickers,selectedImage:null});}};_this.selectImage=function(event){event.preventDefault();console.log(\"I am selecting a sticker\");var target=event.target;var source=target.src;console.log(source);_this.setState({selectedImage:source});};return _this;}_createClass(IndividualList,[{key:\"componentDidMount\",value:function componentDidMount(props){var _this$props$location$=this.props.location.state,listId=_this$props$location$.listId,user=_this$props$location$.user;this.state.listId=listId;this.state.user=user;//if user = visitor, do not show add item, delete item, edit description, edit item, etc buttons. If user = me, show buttons\nconsole.log(this.state.user);get_all_items(this,listId);}},{key:\"ListDescription\",value:function ListDescription(){return/*#__PURE__*/_jsxs(\"div\",{id:\"ListDescription\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"List Description\"}),/*#__PURE__*/_jsx(\"p\",{children:this.state.ListDescription})]});}},{key:\"Header\",value:function Header(){return/*#__PURE__*/_jsxs(\"div\",{id:\"HeaderIndividualList\",children:[/*#__PURE__*/_jsx(NavigationBar,{app:this.props.app}),/*#__PURE__*/_jsx(\"h1\",{children:this.state.ListName+\"(\"+this.state.Category+\")\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"AddNewItem\",onClick:this.OpenClose,children:\" Add a new list item\"}),this.state.seen?/*#__PURE__*/_jsx(NewRankPopup,{addNewItem:this.addNewItem,OpenClose:this.OpenClose}):null,this.state.seen2?/*#__PURE__*/_jsx(EditRankPopup,{OpenClose:this.OpenClose2,Info:this.state.info,editItem:this.editItem}):null,this.state.seen3?/*#__PURE__*/_jsx(EditDescription,{editDescription:this.editDescription,OpenClose:this.OpenClose3,Description:this.state.ListDescription}):null,/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"DeleteWholeList\",onClick:this.deleteWholeList,children:\" Delete the whole list \"}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"EditDescription\",onClick:this.OpenClose3,children:\" Edit Description \"})]});}},{key:\"TableRow\",value:function TableRow(info){var _this2=this;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:info.rank})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:info.foodName})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:info.notes})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"editIndividualList\",onClick:function onClick(){return _this2.changeEditingRank(info);},children:\" edit \"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"deleteIndividualList\",onClick:function onClick(){return _this2.removeFoodRank(info);},children:\" delete \"})})]},uid(info));}},{key:\"Table\",value:function Table(){var _this3=this;return/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Rank\"}),/*#__PURE__*/_jsx(\"th\",{children:\"FoodName\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Notes\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]}),this.state.FoodRank.map(function(info){return _this3.TableRow(info);})]})});}},{key:\"deleteFreeSticker\",value:function deleteFreeSticker(id){console.log(\"Deleteing\");var freeStickers=this.state.freeStickers;var filtered=freeStickers.filter(function(fs){return fs.id.toString()!==id;});console.log(filtered);this.setState({freeStickers:filtered});}},{key:\"freeSticker\",value:function freeSticker(fs){var id=fs.id;var stringID=id.toString();var source=fs.source;var x=fs.location[0];var y=fs.location[1];var left=x-25+'px';var top=y-25+'px';var sticker=document.createElement(\"IMG\");sticker.src=source;sticker.alt=\"iamge not found\";sticker.key=uid(fs);sticker.id=stringID;sticker.className='freeSticker';sticker.style.left=left;sticker.style.top=top;sticker.style.position=\"absolute\";return ReactHtmlParser(sticker.outerHTML);}},{key:\"FreeStickers\",value:function FreeStickers(){var _this4=this;var freeStickers=this.state.freeStickers;return/*#__PURE__*/_jsx(\"div\",{children:freeStickers.map(function(fs){return _this4.freeSticker(fs);})});}},{key:\"sticker\",value:function sticker(s){return/*#__PURE__*/_jsxs(\"div\",{className:\"stickerDiv\",children:[/*#__PURE__*/_jsx(\"img\",{src:this.state.stickers[s.id].source,alt:\"No image\",className:\"sticker\",onClick:this.selectImage}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"})]},uid(s));}},{key:\"StickerList\",value:function StickerList(){var _this5=this;return/*#__PURE__*/_jsx(\"div\",{className:\"stickerList\",children:this.state.stickers.map(function(s){return _this5.sticker(s);})});}},{key:\"StickerPanel\",value:function StickerPanel(){return/*#__PURE__*/_jsxs(\"div\",{className:\"StickerPanel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Choose Your Stickers\"}),/*#__PURE__*/_jsx(\"p\",{children:\" Choose by clicking the image and the position that the sticker should go and deleting by clicking again\"}),this.StickerList(),/*#__PURE__*/_jsx(\"p\",{children:\"Stickers can only go to the header, List Description, item table and sticker panel\"})]});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{onClick:this.click,children:[/*#__PURE__*/_jsx(\"hr\",{}),this.Header(),/*#__PURE__*/_jsx(\"br\",{}),this.Table(),this.ListDescription(),this.StickerPanel(),this.FreeStickers()]});}}]);return IndividualList;}(React.Component);var NewRankPopup=/*#__PURE__*/function(_React$Component2){_inherits(NewRankPopup,_React$Component2);var _super2=_createSuper(NewRankPopup);function NewRankPopup(){var _this6;_classCallCheck(this,NewRankPopup);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this6=_super2.call.apply(_super2,[this].concat(args));_this6.state={FoodName:\"\",Rank:\"\",Note:\"\"};_this6.handleChange=function(event){var target=event.target;var value=target.value;var name=target.name;_this6.setState(_defineProperty({},name,value));};return _this6;}_createClass(NewRankPopup,[{key:\"FoodNameForm\",value:function FoodNameForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"FoodNameForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Food Name:  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"FoodName\",value:this.state.FoodName,onChange:this.handleChange,className:\"FoodNameInputBox\"})]})});}},{key:\"RankForm\",value:function RankForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"RankForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rank:                      \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"Rank\",value:this.state.rank,className:\"RankInputBox\",onChange:this.handleChange})]})});}},{key:\"NoteForm\",value:function NoteForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"NoteForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:  \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"Note\",value:this.state.Note,className:\"NoteInputBox\",onChange:this.handleChange,rows:\"5\",cols:\"10\",wrap:\"soft\"})]})});}},{key:\"Header\",value:function Header(){return/*#__PURE__*/_jsx(\"div\",{className:\"PopUpWindowHeader\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Add a new Item to the list\"})});}},{key:\"render\",value:function render(){var _this7=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"PopUpWindow\",children:[this.Header(),/*#__PURE__*/_jsx(\"br\",{}),this.FoodNameForm(),/*#__PURE__*/_jsx(\"br\",{}),this.RankForm(),/*#__PURE__*/_jsx(\"br\",{}),this.NoteForm(),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ButtonArray\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return _this7.props.addNewItem(_this7.state);},children:\"submit\"}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.props.OpenClose,children:\" Cancel \"})]})]});}}]);return NewRankPopup;}(React.Component);var EditRankPopup=/*#__PURE__*/function(_React$Component3){_inherits(EditRankPopup,_React$Component3);var _super3=_createSuper(EditRankPopup);function EditRankPopup(){var _this8;_classCallCheck(this,EditRankPopup);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}_this8=_super3.call.apply(_super3,[this].concat(args));_this8.state={FoodName:_this8.props.Info.FoodName,Notes:_this8.props.Info.Notes,Rank:_this8.props.Info.Rank};_this8.handleChange=function(event){var target=event.target;var value=target.value;var name=target.name;_this8.setState(_defineProperty({},name,value));};return _this8;}_createClass(EditRankPopup,[{key:\"Header\",value:function Header(){return/*#__PURE__*/_jsx(\"div\",{className:\"PopUpWindowHeader\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Edit this item\"})});}},{key:\"NoteForm\",value:function NoteForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"NoteForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:  \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"Notes\",value:this.state.Notes,className:\"NoteInputBox\",onChange:this.handleChange,rows:\"5\",cols:\"10\",wrap:\"soft\"})]})});}},{key:\"FoodNameForm\",value:function FoodNameForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"FoodNameForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Food Name:  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"FoodName\",value:this.state.FoodName,onChange:this.handleChange,className:\"FoodNameInputBox\"})]})});}},{key:\"render\",value:function render(){var _this9=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"PopUpWindow\",children:[this.Header(),/*#__PURE__*/_jsx(\"br\",{}),this.FoodNameForm(),/*#__PURE__*/_jsx(\"br\",{}),this.NoteForm(),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ButtonArray\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return _this9.props.editItem(_this9.state);},children:\"submit\"}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.props.OpenClose,children:\" Cancel \"})]})]});}}]);return EditRankPopup;}(React.Component);var EditDescription=/*#__PURE__*/function(_React$Component4){_inherits(EditDescription,_React$Component4);var _super4=_createSuper(EditDescription);function EditDescription(){var _this10;_classCallCheck(this,EditDescription);for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}_this10=_super4.call.apply(_super4,[this].concat(args));_this10.state={Description:_this10.props.Description};_this10.handleChange=function(event){var target=event.target;var value=target.value;var name=target.name;_this10.setState(_defineProperty({},name,value));};return _this10;}_createClass(EditDescription,[{key:\"Header\",value:function Header(){return/*#__PURE__*/_jsx(\"div\",{className:\"PopUpWindowHeader\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Edit List Description\"})});}},{key:\"DescriptionForm\",value:function DescriptionForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"DescriptionForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"New description:  \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"Description\",value:this.state.description,onChange:this.handleChange,className:\"DescriptionInputBox\",rows:\"5\",cols:\"10\",wrap:\"soft\",children:\" \"})]})});}},{key:\"render\",value:function render(){var _this11=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"PopUpWindow\",children:[this.Header(),/*#__PURE__*/_jsx(\"br\",{}),this.DescriptionForm(),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ButtonArray\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return _this11.props.editDescription(_this11.state.Description);},children:\"submit\"}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.props.OpenClose,children:\" Cancel \"})]})]});}}]);return EditDescription;}(React.Component);export default IndividualList;","map":{"version":3,"sources":["/Users/valeriewirianto/University Stuff/309/Group/team50/client/src/IndividualList.js"],"names":["uid","watermelon","donut","pie","broccoli","React","ReactHtmlParser","NavigationBar","add_item","delete_list","get_all_items","delete_item","edit_item","update_list_description","IndividualList","state","ListName","Category","ListDescription","FoodRank","seen","seen2","seen3","info","stickers","id","source","freeStickers","selectedImage","user","removeFoodRank","Info","listId","_id","then","response","filterFoodRank","filter","check","map","R","index","Rank","setState","deleteWholeList","alert","props","history","push","OpenClose","OpenClose2","OpenClose3","editItem","PopUpState","foodName","FoodName","notes","Notes","rank","editedItem","splice","addNewItem","Note","length","note","newItem","editDescription","description","res","changeEditingRank","click","event","target","type","className","targetID","deleteFreeSticker","x","clientX","y","clientY","ID","freeSticker","location","existingFreeStickers","selectImage","preventDefault","console","log","src","app","TableRow","filtered","fs","toString","stringID","left","top","sticker","document","createElement","alt","key","style","position","outerHTML","s","StickerList","Header","Table","StickerPanel","FreeStickers","Component","NewRankPopup","handleChange","value","name","FoodNameForm","RankForm","NoteForm","EditRankPopup","EditDescription","Description","DescriptionForm"],"mappings":"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","sourcesContent":["import \"./IndividualFriendsUserSetting.css\";\nimport {uid} from 'react-uid';\n// import {Link} from \"react-router-dom\";\nimport watermelon from './Stickers/watermelon.png'\nimport donut from './Stickers/donut.png'\nimport pie from './Stickers/pie.png'\nimport broccoli from './Stickers/brocoli.png'\nimport React from \"react\";\nimport ReactHtmlParser from 'react-html-parser';\nimport NavigationBar from './NavigationBar'\nimport { add_item, delete_list, get_all_items, delete_item, edit_item, update_list_description } from \"./actions/myList\";\nclass IndividualList extends React.Component{\n\n    state = {\n        ListName: \"Home Grown Ingredients\",\n        Category: \"Ingredients\",\n        ListDescription: \"My favourite ingredients that I grow in my garden\",\n        FoodRank: [],\n        seen: false,\n        seen2: false,\n        seen3: false,\n        info: {},\n        stickers: [{id:0, source: watermelon}, {id: 1, source: donut}, {id:2, source: pie}, {id: 3, source: broccoli}],\n        freeStickers: [],\n        selectedImage : null,\n        user: null\n    }\n\n    componentDidMount(props){\n        const { listId, user } = this.props.location.state\n        this.state.listId = listId\n        this.state.user = user //if user = visitor, do not show add item, delete item, edit description, edit item, etc buttons. If user = me, show buttons\n        console.log(this.state.user)\n        get_all_items (this, listId)\n    }\n\n    ListDescription(){\n        return(\n            <div id='ListDescription'>\n                <h2>List Description</h2>\n                <p>{this.state.ListDescription}</p>\n            </div>\n        )\n    }\n\n    removeFoodRank = (Info) => {\n\n        delete_item(this.state.listId, Info._id).then(response =>{\n            let filterFoodRank = this.state.FoodRank.filter(\n                (check) =>{\n                    return check !== Info\n                }\n            )\n    \n            filterFoodRank.map((R, index)=> R.Rank = index + 1)\n    \n            this.setState(\n                {\n                    FoodRank: filterFoodRank\n                }\n            )\n        })\n\n    }\n\n    deleteWholeList = ()=>{\n        delete_list(this.state.listId).then(response =>{\n            if(response === \"success\"){\n                alert(\"List deleted!\")\n                this.props.history.push('/main')\n            }\n        })\n    }\n\n    OpenClose =()=>{\n        this.setState({\n            seen: !this.state.seen\n        })\n    }\n\n    OpenClose2 =()=>{\n        this.setState({\n            seen2: !this.state.seen2\n        })\n    }\n\n    OpenClose3 =()=>{\n        this.setState({\n            seen3: !this.state.seen3\n        })\n    }\n\n    editItem = (PopUpState)=>{\n        const foodName = PopUpState.FoodName\n        const notes = PopUpState.Notes\n        const rank = PopUpState.Rank\n\n        let filterFoodRank = this.state.FoodRank.filter(\n            (check) =>{\n                return check.Rank !== rank\n            }\n        )\n\n        const editedItem = {\n            Rank: rank,\n            FoodName: foodName,\n            Notes: notes\n        }\n\n        filterFoodRank.splice(rank - 1,0, editedItem)\n        filterFoodRank.map((R, index)=> R.Rank = index + 1)\n        this.setState(\n            {\n                FoodRank: filterFoodRank\n            }\n        )\n\n        // edit_item(this.state.listId, Info._id, PopUpState.FoodName, PopUpState.Notes).then(response =>{\n            \n        // })\n\n        this.OpenClose2()\n\n\n    }\n\n    addNewItem = async (PopUpState)=>{\n        const foodName = PopUpState.FoodName\n        let rank = PopUpState.Rank\n        \n        // Basic error handling\n        if (PopUpState.FoodName === \"\" || PopUpState.Rank === \"\" || PopUpState.Note === \"\"){\n            alert(\"Please input a value for all fields\")\n            return\n        }\n\n        // Max, please check if rank is integer. Im too lazy to google it. Thanks. The below didnt work. strings ew\n        // if (!Number.isInteger(PopUpState.Rank)){\n        //     alert(\"Please input an integer as the rank\")\n        //     return\n        // }\n\n        if (PopUpState.Rank < 1){\n            alert(\"Please enter an integer for rank greater than 0\")\n            return\n        }\n\n        // rank greater than  MAX rank in current list\n        if (this.state.FoodRank.length === 0){\n\n        }\n        else if(rank > this.state.FoodRank[this.state.FoodRank.length - 1].rank){\n            rank = this.state.FoodRank[this.state.FoodRank.length - 1].rank + 1\n        }\n\n        const note = PopUpState.Note\n        const newItem = {\n            rank: rank,\n            foodName: foodName,\n            notes: note\n        }\n\n        // Add new item and update current FoodRank\n        await add_item(this, newItem, this.state.listId)\n\n        this.OpenClose()\n    }\n\n    editDescription = (description) => {\n        update_list_description(this.state.listId, description).then(res =>{\n            this.setState(\n                {\n                    ListDescription: description\n                }\n            )\n        })\n        this.OpenClose3()\n    }\n\n    Header(){\n        return(\n            <div id='HeaderIndividualList'>\n                <NavigationBar app = {this.props.app}/>\n                <h1>{this.state.ListName + \"(\" + this.state.Category + \")\"}</h1>\n                <button type=\"button\" className='AddNewItem' onClick={this.OpenClose}> Add a new list item</button>\n                {this.state.seen ? <NewRankPopup addNewItem={this.addNewItem} OpenClose={this.OpenClose} /> : null}\n                {this.state.seen2 ? <EditRankPopup OpenClose={this.OpenClose2} Info= {this.state.info}\n                                                   editItem={this.editItem}\n                /> : null}\n                {this.state.seen3 ? <EditDescription editDescription={this.editDescription} OpenClose={this.OpenClose3}\n                                                     Description = {this.state.ListDescription}\n                /> : null}\n                <span className='EmptySpace'> </span>\n                <button type=\"button\" className='DeleteWholeList' onClick={this.deleteWholeList}> Delete the whole list </button>\n                <span className='EmptySpace'> </span>\n\n                <button type=\"button\" className='EditDescription' onClick={(this.OpenClose3)}> Edit Description </button>\n\n            </div>\n        )\n    }\n\n\n    changeEditingRank = (Info)=> {\n        this.setState(\n            {\n                info: Info\n            }\n        )\n        this.OpenClose2()\n    }\n\n    TableRow(info){\n        return(\n            <tr key={uid(info)}>\n                <td>\n                    <strong>{info.rank}</strong>\n                </td>\n                <td>\n                    <strong>{info.foodName}</strong>\n                </td>\n                <td>\n                    <strong>{info.notes}</strong>\n                </td>\n                <td>\n                    <button type=\"button\" className='editIndividualList'\n                            onClick={() => this.changeEditingRank(info)}\n                    > edit </button>\n                </td>\n                <td>\n                    <button type=\"button\" className='deleteIndividualList'\n                            onClick = {\n                                () => this.removeFoodRank(info)\n                            }\n                    > delete </button>\n                </td>\n            </tr>\n        )\n    }\n\n\n    Table(){\n        return(\n            <table>\n                <tbody>\n                <tr>\n                    <th>Rank</th>\n                    <th>FoodName</th>\n                    <th>Notes</th>\n                    <th>Edit</th>\n                    <th>Delete</th>\n                </tr>\n                {this.state.FoodRank.map(info => {return this.TableRow(info)})}\n                </tbody>\n            </table>\n        )\n    }\n\n\n\n\n    deleteFreeSticker(id){\n        console.log(\"Deleteing\")\n        const freeStickers = this.state.freeStickers\n        let filtered = freeStickers.filter(fs => fs.id.toString() !== id)\n        console.log(filtered)\n        this.setState({\n            freeStickers: filtered\n        })\n    }\n\n\n\n    click = (event)=>{\n        const target = event.target\n        const type = target.type\n        const className = target.className\n\n        if(className === 'freeSticker'){\n            const targetID = target.id\n            this.deleteFreeSticker(targetID)\n        }\n\n        if (type !== 'button' && this.state.selectedImage != null && className !== 'sticker'){\n            let x = event.clientX\n            let y = event.clientY\n            const length = this.state.freeStickers.length\n            let ID = 0\n            if (length !== 0){\n                ID = this.state.freeStickers[length - 1].id + 1\n            }\n            const freeSticker = {\n                id: ID,\n                location: [x, y],\n                source: this.state.selectedImage\n            }\n            let existingFreeStickers = this.state.freeStickers\n            existingFreeStickers.push(freeSticker)\n            this.setState({\n                freeStickers: existingFreeStickers,\n                selectedImage: null\n\n            })\n\n        }\n    }\n\n    freeSticker(fs) {\n        const id = fs.id\n        const stringID = id.toString()\n        const source = fs.source\n        const x = fs.location[0]\n        const y = fs.location[1]\n        let left = (x - 25)+ 'px';\n        let top = (y - 25) + 'px';\n        let sticker = document.createElement(\"IMG\");\n        sticker.src =source\n        sticker.alt = \"iamge not found\"\n        sticker.key = uid(fs)\n        sticker.id = stringID\n        sticker.className = 'freeSticker'\n        sticker.style.left = left\n        sticker.style.top = top\n        sticker.style.position = \"absolute\"\n\n        return (\n            ReactHtmlParser(sticker.outerHTML)\n        )\n\n    }\n\n    FreeStickers(){\n        const freeStickers = this.state.freeStickers\n        return(\n                <div>\n                    { freeStickers.map(fs => this.freeSticker(fs))}\n                </div>\n\n\n                )\n    }\n\n    selectImage= (event)=> {\n        event.preventDefault()\n        console.log(\"I am selecting a sticker\")\n        const target = event.target\n        const source = target.src\n        console.log(source)\n        this.setState({\n            selectedImage: source\n        })\n\n\n    }\n\n    sticker(s){\n\n        return(\n            <div className='stickerDiv' key={uid(s)}>\n                <img src={this.state.stickers[s.id].source } alt='No image'  className='sticker'\n                     onClick={this.selectImage}/>\n                <span className='EmptySpace'> </span>\n            </div>\n\n        )\n    }\n\n\n\n\n\n    StickerList(){\n        return(\n            <div className='stickerList'>\n                {this.state.stickers.map(s => this.sticker(s))}\n\n            </div>\n\n        )\n    }\n\n\n\n    StickerPanel(){\n        return(\n            <div className='StickerPanel'>\n                <h2> Choose Your Stickers</h2>\n                <p> Choose by clicking the image and the position that the sticker should go and deleting by clicking again</p>\n                {this.StickerList()}\n                <p>Stickers can only go to the header, List Description, item table and sticker panel</p>\n            </div>\n        )\n    }\n\n\n\n    render() {\n        return(\n            <div onClick={this.click}>\n                {/*<Link to={'/Main'}>*/}\n                {/*    <div><button className='back'>Back</button></div>*/}\n                {/*</Link>*/}\n                <hr/>\n                {this.Header()}\n                <br/>\n\n                {this.Table()}\n                {this.ListDescription()}\n                {this.StickerPanel()}\n                {this.FreeStickers()}\n\n            </div>\n        )\n    }\n}\n\nclass NewRankPopup extends React.Component{\n    state = {\n        FoodName: \"\",\n        Rank: \"\",\n        Note: \"\"\n    }\n\n    handleChange = (event) => {\n        const target = event.target\n        const value = target.value\n        const name = target.name\n\n        this.setState({\n            [name]: value\n        })\n    }\n\n    FoodNameForm(){\n        return(\n            <form className=\"FoodNameForm\">\n                <label>\n                    <strong>Food Name:  </strong>\n                    <input type=\"text\" name=\"FoodName\" value = {this.state.FoodName}\n                           onChange={this.handleChange} className=\"FoodNameInputBox\"\n                    />\n                </label>\n            </form>\n        )\n    }\n\n    RankForm(){\n        return(\n            <form className=\"RankForm\">\n                <label>\n                    <strong>{\"Rank:                      \"}</strong>\n                    <input type=\"text\" name=\"Rank\" value = {this.state.rank} className=\"RankInputBox\"\n                           onChange={this.handleChange}\n                    />\n                </label>\n            </form>\n        )\n    }\n    NoteForm(){\n        return(\n            <form className=\"NoteForm\">\n                <label>\n                    <strong>Note:  </strong>\n                    <br/>\n                    <textarea  name=\"Note\" value = {this.state.Note} className=\"NoteInputBox\"\n                               onChange={this.handleChange} rows=\"5\" cols=\"10\" wrap=\"soft\">\n                    </textarea>\n                </label>\n            </form>\n        )\n    }\n\n    Header(){\n        return(\n            <div className=\"PopUpWindowHeader\">\n                <h2>Add a new Item to the list</h2>\n            </div>\n\n        )\n    }\n\n\n\n    render(){\n        return(\n            <div className=\"PopUpWindow\">\n                {this.Header()}\n                <br />\n                {this.FoodNameForm()}\n                <br />\n                {this.RankForm()}\n                <br />\n                {this.NoteForm()}\n                <br />\n                <div className=\"ButtonArray\">\n                    <button type=\"button\" onClick={()=>this.props.addNewItem(this.state)}>submit</button>\n                    <span className='EmptySpace'> </span>\n                    <button type=\"button\" onClick={this.props.OpenClose}> Cancel </button>\n                </div>\n\n            </div>\n    )\n    }\n}\n\nclass EditRankPopup extends React.Component{\n    state = {\n        FoodName: this.props.Info.FoodName,\n        Notes: this.props.Info.Notes,\n        Rank: this.props.Info.Rank\n    }\n    handleChange = (event) => {\n        const target = event.target\n        const value = target.value\n        const name = target.name\n\n        this.setState({\n            [name]: value\n        })\n    }\n\n    Header(){\n        return(\n            <div className=\"PopUpWindowHeader\">\n                <h2>Edit this item</h2>\n            </div>\n\n        )\n    }\n\n    NoteForm(){\n        return(\n            <form className=\"NoteForm\">\n                <label>\n                    <strong>Note:  </strong>\n                    <br/>\n                    <textarea name=\"Notes\" value = {this.state.Notes} className=\"NoteInputBox\"\n                                          onChange={this.handleChange} rows=\"5\" cols=\"10\" wrap=\"soft\">\n                    </textarea>\n                </label>\n            </form>\n        )\n    }\n\n    FoodNameForm(){\n        return(\n            <form className=\"FoodNameForm\">\n                <label>\n                    <strong>Food Name:  </strong>\n                    <input type=\"text\" name=\"FoodName\" value = {this.state.FoodName}\n                           onChange={this.handleChange} className=\"FoodNameInputBox\"\n                    />\n                </label>\n            </form>\n        )\n    }\n\n    render(){\n        return(\n            <div className=\"PopUpWindow\">\n                {this.Header()}\n                <br />\n                {this.FoodNameForm()}\n                <br />\n                {this.NoteForm()}\n                <br />\n                <div className=\"ButtonArray\">\n                    <button type=\"button\" onClick={()=>this.props.editItem(this.state)}>submit</button>\n                    <span className='EmptySpace'> </span>\n                    <button type=\"button\" onClick={this.props.OpenClose}> Cancel </button>\n                </div>\n            </div>\n        )\n    }\n}\n\nclass EditDescription extends React.Component{\n    state = {\n        Description: this.props.Description\n    }\n\n    handleChange = (event) => {\n        const target = event.target\n        const value = target.value\n        const name = target.name\n\n        this.setState({\n            [name]: value\n        })\n    }\n\n    Header(){\n        return(\n            <div className=\"PopUpWindowHeader\">\n                <h2>Edit List Description</h2>\n            </div>\n        )\n    }\n\n    DescriptionForm(){\n        return(\n            <form className=\"DescriptionForm\">\n                <label>\n                    <strong>New description:  </strong>\n                    <br/>\n                    <br/>\n                    <textarea name=\"Description\" value = {this.state.description}\n                              onChange={this.handleChange} className=\"DescriptionInputBox\" rows=\"5\" cols=\"10\" wrap=\"soft\"> </textarea>\n                </label>\n            </form>\n        )\n    }\n\n    render() {\n        return(\n            <div className=\"PopUpWindow\">\n                {this.Header()}\n                <br />\n                {this.DescriptionForm()}\n                <br />\n                <div className=\"ButtonArray\">\n                    <button type=\"button\" onClick={()=>this.props.editDescription(this.state.Description)}>submit</button>\n                    <span className='EmptySpace'> </span>\n                    <button type=\"button\" onClick={this.props.OpenClose}> Cancel </button>\n                </div>\n            </div>\n        )\n    }\n\n}\n\n\nexport default IndividualList;"]},"metadata":{},"sourceType":"module"}