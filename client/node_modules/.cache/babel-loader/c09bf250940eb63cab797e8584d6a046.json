{"ast":null,"code":"import _defineProperty from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/valeriewirianto/University Stuff/309/Group/team50/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import\"./IndividualFriendsUserSetting.css\";import{uid}from'react-uid';// import {Link} from \"react-router-dom\";\nimport watermelon from'./Stickers/watermelon.png';import donut from'./Stickers/donut.png';import pie from'./Stickers/pie.png';import broccoli from'./Stickers/brocoli.png';import React from\"react\";import NavigationBar from'./NavigationBar';import{add_item,delete_list,get_all_items,delete_item,edit_item,update_list_description}from\"./actions/myList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var IndividualList=/*#__PURE__*/function(_React$Component){_inherits(IndividualList,_React$Component);var _super=_createSuper(IndividualList);function IndividualList(){var _this;_classCallCheck(this,IndividualList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={ListName:\"\",Category:\"\",ListDescription:\"\",FoodRank:[],seen:false,seen2:false,seen3:false,info:{},stickers:[{id:0,source:watermelon},{id:1,source:donut},{id:2,source:pie},{id:3,source:broccoli}],freeStickers:[],selectedImage:null,user:null};_this.removeFoodRank=function(Info){delete_item(_this.state.listId,Info._id).then(function(response){var filterFoodRank=_this.state.FoodRank.filter(function(check){return check!==Info;});filterFoodRank.map(function(R,index){return R.Rank=index+1;});_this.setState({FoodRank:filterFoodRank});});};_this.deleteWholeList=function(){delete_list(_this.state.listId).then(function(response){if(response===\"success\"){alert(\"List deleted!\");_this.props.history.push('/main');}});};_this.OpenClose=function(){_this.setState({seen:!_this.state.seen});};_this.OpenClose2=function(){_this.setState({seen2:!_this.state.seen2});};_this.OpenClose3=function(){_this.setState({seen3:!_this.state.seen3});};_this.editItem=function(PopUpState,item_id){var foodName=PopUpState.FoodName;var notes=PopUpState.Notes;var rank=PopUpState.Rank;var filterFoodRank=_this.state.FoodRank.filter(function(check){return check.Rank!==rank;});var editedItem={Rank:rank,FoodName:foodName,Notes:notes};edit_item(_assertThisInitialized(_this),_this.state.listId,item_id,foodName,notes);_this.OpenClose2();};_this.addNewItem=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(PopUpState){var foodName,rank,note,newItem;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:foodName=PopUpState.FoodName;rank=PopUpState.Rank;// Basic error handling\nif(!(PopUpState.FoodName===\"\"||PopUpState.Rank===\"\"||PopUpState.Note===\"\")){_context.next=5;break;}alert(\"Please input a value for all fields\");return _context.abrupt(\"return\");case 5:if(parseInt(PopUpState.Rank)){_context.next=8;break;}alert(\"Please input an integer as the rank\");return _context.abrupt(\"return\");case 8:if(!(PopUpState.Rank<1)){_context.next=11;break;}alert(\"Please enter an integer for rank greater than 0\");return _context.abrupt(\"return\");case 11:// rank greater than  MAX rank in current list\nif(_this.state.FoodRank.length===0){}else if(rank>_this.state.FoodRank[_this.state.FoodRank.length-1].rank){rank=_this.state.FoodRank[_this.state.FoodRank.length-1].rank+1;}note=PopUpState.Note;newItem={rank:rank,foodName:foodName,notes:note};// Add new item and update current FoodRank\n_context.next=16;return add_item(_assertThisInitialized(_this),newItem,_this.state.listId);case 16:_this.OpenClose();case 17:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.editDescription=function(description){update_list_description(_this.state.listId,description).then(function(res){_this.setState({ListDescription:description});});_this.OpenClose3();};_this.changeEditingRank=function(Info){_this.setState({info:Info});_this.OpenClose2();};return _this;}_createClass(IndividualList,[{key:\"componentDidMount\",value:function componentDidMount(props){var _this$props$location$=this.props.location.state,listId=_this$props$location$.listId,user=_this$props$location$.user;this.state.listId=listId;this.state.user=user;//if user = visitor, do not show add item, delete item, edit description, edit item, etc buttons. If user = me, show buttons\nconsole.log(this.state.user);get_all_items(this,listId);}},{key:\"ListDescription\",value:function ListDescription(){return/*#__PURE__*/_jsxs(\"div\",{id:\"ListDescription\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"List Description\"}),/*#__PURE__*/_jsx(\"p\",{children:this.state.ListDescription})]});}},{key:\"Header\",value:function Header(){return/*#__PURE__*/_jsxs(\"div\",{id:\"HeaderIndividualList\",children:[/*#__PURE__*/_jsx(NavigationBar,{app:this.props.app,history:this.props.history}),/*#__PURE__*/_jsx(\"h1\",{children:this.state.ListName+\"(\"+this.state.Category+\")\"}),this.state.user===\"me\"?/*#__PURE__*/_jsx(\"button\",{type:\"button\",id:\"AddNewItem\",onClick:this.OpenClose,children:\" Add a new list item\"}):null,this.state.seen?/*#__PURE__*/_jsx(NewRankPopup,{addNewItem:this.addNewItem,OpenClose:this.OpenClose}):null,this.state.seen2?/*#__PURE__*/_jsx(EditRankPopup,{OpenClose:this.OpenClose2,Info:this.state.info,editItem:this.editItem}):null,this.state.seen3?/*#__PURE__*/_jsx(EditDescription,{editDescription:this.editDescription,OpenClose:this.OpenClose3,Description:this.state.ListDescription}):null,/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),this.state.user===\"me\"?/*#__PURE__*/_jsx(\"button\",{type:\"button\",id:\"DeleteWholeList\",onClick:this.deleteWholeList,children:\" Delete the whole list \"}):null,/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),this.state.user===\"me\"?/*#__PURE__*/_jsx(\"button\",{type:\"button\",id:\"EditDescription\",onClick:this.OpenClose3,children:\" Edit Description \"}):null]});}},{key:\"TableRow\",value:function TableRow(info){var _this2=this;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"RankRow\",children:/*#__PURE__*/_jsx(\"strong\",{children:info.rank})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"NameRow\",children:/*#__PURE__*/_jsx(\"strong\",{children:info.foodName})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"NoteRow\",children:info.notes})}),this.state.user===\"me\"?/*#__PURE__*/_jsx(\"td\",{className:\"EditRow\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"editIndividualList\",onClick:function onClick(){return _this2.changeEditingRank(info);},children:\" edit \"})}):null,this.state.user===\"me\"?/*#__PURE__*/_jsx(\"td\",{className:\"DeleteRow\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"deleteIndividualList\",onClick:function onClick(){return _this2.removeFoodRank(info);},children:\" delete \"})}):null]},uid(info));}},{key:\"Table\",value:function Table(){var _this3=this;return/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Rank\"}),/*#__PURE__*/_jsx(\"th\",{children:\"FoodName\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Notes\"}),this.state.user===\"me\"?/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}):null,this.state.user===\"me\"?/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"}):null]}),this.state.FoodRank.map(function(info){return _this3.TableRow(info);})]})});}// deleteFreeSticker(id){\n//     console.log(\"Deleteing\")\n//     const freeStickers = this.state.freeStickers\n//     let filtered = freeStickers.filter(fs => fs.id.toString() !== id)\n//     console.log(filtered)\n//     this.setState({\n//         freeStickers: filtered\n//     })\n// }\n//\n//\n//\n// click = (event)=>{\n//     const target = event.target\n//     const type = target.type\n//     const className = target.className\n//\n//     if(className === 'freeSticker'){\n//         const targetID = target.id\n//         this.deleteFreeSticker(targetID)\n//     }\n//\n//     if (type !== 'button' && this.state.selectedImage != null && className !== 'sticker'){\n//         let x = event.clientX\n//         let y = event.clientY\n//         const length = this.state.freeStickers.length\n//         let ID = 0\n//         if (length !== 0){\n//             ID = this.state.freeStickers[length - 1].id + 1\n//         }\n//         const freeSticker = {\n//             id: ID,\n//             location: [x, y],\n//             source: this.state.selectedImage\n//         }\n//         let existingFreeStickers = this.state.freeStickers\n//         existingFreeStickers.push(freeSticker)\n//         this.setState({\n//             freeStickers: existingFreeStickers,\n//             selectedImage: null\n//\n//         })\n//\n//     }\n// }\n//\n// freeSticker(fs) {\n//     const id = fs.id\n//     const stringID = id.toString()\n//     const source = fs.source\n//     const x = fs.location[0]\n//     const y = fs.location[1]\n//     let left = (x - 25)+ 'px';\n//     let top = (y - 25) + 'px';\n//     let sticker = document.createElement(\"IMG\");\n//     sticker.src =source\n//     sticker.alt = \"iamge not found\"\n//     sticker.key = uid(fs)\n//     sticker.id = stringID\n//     sticker.className = 'freeSticker'\n//     sticker.style.left = left\n//     sticker.style.top = top\n//     sticker.style.position = \"absolute\"\n//\n//     return (\n//         ReactHtmlParser(sticker.outerHTML)\n//     )\n//\n// }\n//\n// FreeStickers(){\n//     const freeStickers = this.state.freeStickers\n//     return(\n//             <div>\n//                 { freeStickers.map(fs => this.freeSticker(fs))}\n//             </div>\n//\n//\n//             )\n// }\n//\n// selectImage= (event)=> {\n//     event.preventDefault()\n//     console.log(\"I am selecting a sticker\")\n//     const target = event.target\n//     const source = target.src\n//     console.log(source)\n//     this.setState({\n//         selectedImage: source\n//     })\n//\n//\n// }\n//\n// sticker(s){\n//\n//     return(\n//         <div className='stickerDiv' key={uid(s)}>\n//             <img src={this.state.stickers[s.id].source } alt='No image'  className='sticker'\n//                  onClick={this.selectImage}/>\n//             <span className='EmptySpace'> </span>\n//         </div>\n//\n//     )\n// }\n//\n//\n//\n//\n//\n// StickerList(){\n//     return(\n//         <div className='stickerList'>\n//             {this.state.stickers.map(s => this.sticker(s))}\n//\n//         </div>\n//\n//     )\n// }\n//\n//\n//\n// StickerPanel(){\n//     return(\n//         <div className='StickerPanel'>\n//             <h2> Choose Your Stickers</h2>\n//             <p> Choose by clicking the image and the position that the sticker should go and deleting by clicking again</p>\n//             {this.StickerList()}\n//             <p>Stickers can only go to the header, List Description, item table and sticker panel</p>\n//         </div>\n//     )\n// }\n},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{onClick:this.click,children:[this.Header(),/*#__PURE__*/_jsx(\"br\",{}),this.Table(),this.ListDescription()]});}}]);return IndividualList;}(React.Component);var NewRankPopup=/*#__PURE__*/function(_React$Component2){_inherits(NewRankPopup,_React$Component2);var _super2=_createSuper(NewRankPopup);function NewRankPopup(){var _this4;_classCallCheck(this,NewRankPopup);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this4=_super2.call.apply(_super2,[this].concat(args));_this4.state={FoodName:\"\",Rank:\"\",Note:\"\"};_this4.handleChange=function(event){var target=event.target;var value=target.value;var name=target.name;_this4.setState(_defineProperty({},name,value));};return _this4;}_createClass(NewRankPopup,[{key:\"FoodNameForm\",value:function FoodNameForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"FoodNameForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Food Name:  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"FoodName\",value:this.state.FoodName,onChange:this.handleChange,className:\"FoodNameInputBox\"})]})});}},{key:\"RankForm\",value:function RankForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"RankForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rank:                      \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"Rank\",value:this.state.rank,className:\"RankInputBox\",onChange:this.handleChange})]})});}},{key:\"NoteForm\",value:function NoteForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"NoteForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:  \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"Note\",value:this.state.Note,className:\"NoteInputBox\",onChange:this.handleChange,rows:\"5\",cols:\"10\",wrap:\"soft\"})]})});}},{key:\"Header\",value:function Header(){return/*#__PURE__*/_jsx(\"div\",{className:\"PopUpWindowHeader\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Add a new Item to the list\"})});}},{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"PopUpWindow\",children:[this.Header(),/*#__PURE__*/_jsx(\"br\",{}),this.FoodNameForm(),/*#__PURE__*/_jsx(\"br\",{}),this.RankForm(),/*#__PURE__*/_jsx(\"br\",{}),this.NoteForm(),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ButtonArray\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return _this5.props.addNewItem(_this5.state);},children:\"submit\"}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.props.OpenClose,children:\" Cancel \"})]})]});}}]);return NewRankPopup;}(React.Component);var EditRankPopup=/*#__PURE__*/function(_React$Component3){_inherits(EditRankPopup,_React$Component3);var _super3=_createSuper(EditRankPopup);function EditRankPopup(){var _this6;_classCallCheck(this,EditRankPopup);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}_this6=_super3.call.apply(_super3,[this].concat(args));_this6.state={FoodName:_this6.props.Info.FoodName,Notes:_this6.props.Info.Notes,Rank:_this6.props.Info.Rank};_this6.handleChange=function(event){var target=event.target;var value=target.value;var name=target.name;_this6.setState(_defineProperty({},name,value));};return _this6;}_createClass(EditRankPopup,[{key:\"Header\",value:function Header(){return/*#__PURE__*/_jsx(\"div\",{className:\"PopUpWindowHeader\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Edit this item\"})});}},{key:\"NoteForm\",value:function NoteForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"NoteForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:  \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"Notes\",value:this.state.Notes,className:\"NoteInputBox\",onChange:this.handleChange,rows:\"5\",cols:\"10\",wrap:\"soft\"})]})});}},{key:\"FoodNameForm\",value:function FoodNameForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"FoodNameForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Food Name:  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"FoodName\",value:this.state.FoodName,onChange:this.handleChange,className:\"FoodNameInputBox\"})]})});}},{key:\"render\",value:function render(){var _this7=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"PopUpWindow\",children:[this.Header(),/*#__PURE__*/_jsx(\"br\",{}),this.FoodNameForm(),/*#__PURE__*/_jsx(\"br\",{}),this.NoteForm(),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ButtonArray\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return _this7.props.editItem(_this7.state,_this7.props.Info._id);},children:\"submit\"}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.props.OpenClose,children:\" Cancel \"})]})]});}}]);return EditRankPopup;}(React.Component);var EditDescription=/*#__PURE__*/function(_React$Component4){_inherits(EditDescription,_React$Component4);var _super4=_createSuper(EditDescription);function EditDescription(){var _this8;_classCallCheck(this,EditDescription);for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}_this8=_super4.call.apply(_super4,[this].concat(args));_this8.state={Description:_this8.props.Description};_this8.handleChange=function(event){var target=event.target;var value=target.value;var name=target.name;_this8.setState(_defineProperty({},name,value));};return _this8;}_createClass(EditDescription,[{key:\"Header\",value:function Header(){return/*#__PURE__*/_jsx(\"div\",{className:\"PopUpWindowHeader\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Edit List Description\"})});}},{key:\"DescriptionForm\",value:function DescriptionForm(){return/*#__PURE__*/_jsx(\"form\",{className:\"DescriptionForm\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"New description:  \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"Description\",value:this.state.description,onChange:this.handleChange,className:\"DescriptionInputBox\",rows:\"5\",cols:\"10\",wrap:\"soft\",children:\" \"})]})});}},{key:\"render\",value:function render(){var _this9=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"PopUpWindow\",children:[this.Header(),/*#__PURE__*/_jsx(\"br\",{}),this.DescriptionForm(),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ButtonArray\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return _this9.props.editDescription(_this9.state.Description);},children:\"submit\"}),/*#__PURE__*/_jsx(\"span\",{className:\"EmptySpace\",children:\" \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.props.OpenClose,children:\" Cancel \"})]})]});}}]);return EditDescription;}(React.Component);export default IndividualList;","map":{"version":3,"sources":["/Users/valeriewirianto/University Stuff/309/Group/team50/client/src/IndividualList.js"],"names":["uid","watermelon","donut","pie","broccoli","React","NavigationBar","add_item","delete_list","get_all_items","delete_item","edit_item","update_list_description","IndividualList","state","ListName","Category","ListDescription","FoodRank","seen","seen2","seen3","info","stickers","id","source","freeStickers","selectedImage","user","removeFoodRank","Info","listId","_id","then","response","filterFoodRank","filter","check","map","R","index","Rank","setState","deleteWholeList","alert","props","history","push","OpenClose","OpenClose2","OpenClose3","editItem","PopUpState","item_id","foodName","FoodName","notes","Notes","rank","editedItem","addNewItem","Note","parseInt","length","note","newItem","editDescription","description","res","changeEditingRank","location","console","log","app","TableRow","click","Header","Table","Component","NewRankPopup","handleChange","event","target","value","name","FoodNameForm","RankForm","NoteForm","EditRankPopup","EditDescription","Description","DescriptionForm"],"mappings":"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IK,KAAKR,KAAL,CAAWc,IAAX,GAAoB,IAApB,cAA4B,4BAA5B,CAA2C,IAJhD,CAMK,KAAKd,KAAL,CAAWc,IAAX,GAAoB,IAApB,cAA4B,8BAA5B,CAA6C,IANlD,GADA,CAUC,KAAKd,KAAL,CAAWI,QAAX,CAAoBoB,GAApB,CAAwB,SAAAhB,IAAI,CAAI,CAAC,MAAO,CAAA,MAAI,CAACoD,QAAL,CAAcpD,IAAd,CAAP,CAA2B,CAA5D,CAVD,GADJ,EADJ,CAgBH,CAKD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;sBAIA,iBAAS,CACL,mBACI,aAAK,OAAO,CAAE,KAAKqD,KAAnB,WAIK,KAAKC,MAAL,EAJL,cAKI,aALJ,CAOK,KAAKC,KAAL,EAPL,CAQK,KAAK5D,eAAL,EARL,GADJ,CAeH,C,4BAvawBZ,KAAK,CAACyE,S,KA0a7BC,CAAAA,Y,+WACFjE,K,CAAQ,CACJyC,QAAQ,CAAE,EADN,CAEJd,IAAI,CAAE,EAFF,CAGJoB,IAAI,CAAE,EAHF,C,QAMRm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","sourcesContent":["import \"./IndividualFriendsUserSetting.css\";\nimport {uid} from 'react-uid';\n// import {Link} from \"react-router-dom\";\nimport watermelon from './Stickers/watermelon.png'\nimport donut from './Stickers/donut.png'\nimport pie from './Stickers/pie.png'\nimport broccoli from './Stickers/brocoli.png'\nimport React from \"react\";\nimport NavigationBar from './NavigationBar'\nimport { add_item, delete_list, get_all_items, delete_item, edit_item, update_list_description } from \"./actions/myList\";\nclass IndividualList extends React.Component{\n\n    state = {\n        ListName: \"\",\n        Category: \"\",\n        ListDescription: \"\",\n        FoodRank: [],\n        seen: false,\n        seen2: false,\n        seen3: false,\n        info: {},\n        stickers: [{id:0, source: watermelon}, {id: 1, source: donut}, {id:2, source: pie}, {id: 3, source: broccoli}],\n        freeStickers: [],\n        selectedImage : null,\n        user: null\n    }\n\n    componentDidMount(props){\n        const { listId, user } = this.props.location.state\n        this.state.listId = listId\n        this.state.user = user //if user = visitor, do not show add item, delete item, edit description, edit item, etc buttons. If user = me, show buttons\n        console.log(this.state.user)\n        get_all_items (this, listId)\n    }\n\n    ListDescription(){\n        return(\n            <div id='ListDescription'>\n                <h2>List Description</h2>\n                <p>{this.state.ListDescription}</p>\n            </div>\n        )\n    }\n\n    removeFoodRank = (Info) => {\n\n        delete_item(this.state.listId, Info._id).then(response =>{\n            let filterFoodRank = this.state.FoodRank.filter(\n                (check) =>{\n                    return check !== Info\n                }\n            )\n    \n            filterFoodRank.map((R, index)=> R.Rank = index + 1)\n    \n            this.setState(\n                {\n                    FoodRank: filterFoodRank\n                }\n            )\n        })\n\n    }\n\n    deleteWholeList = ()=>{\n        delete_list(this.state.listId).then(response =>{\n            if(response === \"success\"){\n                alert(\"List deleted!\")\n                this.props.history.push('/main')\n            }\n        })\n    }\n\n    OpenClose =()=>{\n        this.setState({\n            seen: !this.state.seen\n        })\n    }\n\n    OpenClose2 =()=>{\n        this.setState({\n            seen2: !this.state.seen2\n        })\n    }\n\n    OpenClose3 =()=>{\n        this.setState({\n            seen3: !this.state.seen3\n        })\n    }\n\n    editItem = (PopUpState, item_id)=>{\n        const foodName = PopUpState.FoodName\n        const notes = PopUpState.Notes\n        const rank = PopUpState.Rank\n\n        let filterFoodRank = this.state.FoodRank.filter(\n            (check) =>{\n                return check.Rank !== rank\n            }\n        )\n\n        const editedItem = {\n            Rank: rank,\n            FoodName: foodName,\n            Notes: notes\n        }\n\n        edit_item(this, this.state.listId, item_id, foodName, notes)\n\n        this.OpenClose2()\n\n\n    }\n\n    addNewItem = async (PopUpState)=>{\n        const foodName = PopUpState.FoodName\n        let rank = PopUpState.Rank\n        \n        // Basic error handling\n        if (PopUpState.FoodName === \"\" || PopUpState.Rank === \"\" || PopUpState.Note === \"\"){\n            alert(\"Please input a value for all fields\")\n            return\n        }\n\n        // Max, please check if rank is integer. Im too lazy to google it. Thanks. The below didnt work. strings ew\n        // if (!Number.isInteger(PopUpState.Rank)){\n        //     alert(\"Please input an integer as the rank\")\n        //     return\n        // }\n\n        if (!parseInt(PopUpState.Rank)){\n            alert(\"Please input an integer as the rank\")\n            return\n        }\n\n\n        if (PopUpState.Rank < 1){\n            alert(\"Please enter an integer for rank greater than 0\")\n            return\n        }\n\n        // rank greater than  MAX rank in current list\n        if (this.state.FoodRank.length === 0){\n\n        }\n        else if(rank > this.state.FoodRank[this.state.FoodRank.length - 1].rank){\n            rank = this.state.FoodRank[this.state.FoodRank.length - 1].rank + 1\n        }\n\n        const note = PopUpState.Note\n        const newItem = {\n            rank: rank,\n            foodName: foodName,\n            notes: note\n        }\n\n        // Add new item and update current FoodRank\n        await add_item(this, newItem, this.state.listId)\n\n        this.OpenClose()\n    }\n\n    editDescription = (description) => {\n        update_list_description(this.state.listId, description).then(res =>{\n            this.setState(\n                {\n                    ListDescription: description\n                }\n            )\n        })\n        this.OpenClose3()\n    }\n\n    Header(){\n        return(\n            <div id='HeaderIndividualList'>\n                <NavigationBar app = {this.props.app} history = {this.props.history}/>\n                <h1>{this.state.ListName + \"(\" + this.state.Category + \")\"}</h1>\n                {this.state.user === \"me\" ? <button type=\"button\" id='AddNewItem' onClick={this.OpenClose}> Add a new list item</button> : null}\n                {/*<button type=\"button\" className='AddNewItem' onClick={this.OpenClose}> Add a new list item</button>*/}\n                {this.state.seen ? <NewRankPopup addNewItem={this.addNewItem} OpenClose={this.OpenClose} /> : null}\n                {this.state.seen2 ? <EditRankPopup OpenClose={this.OpenClose2} Info= {this.state.info}\n                                                   editItem={this.editItem}\n                /> : null}\n                {this.state.seen3 ? <EditDescription editDescription={this.editDescription} OpenClose={this.OpenClose3}\n                                                     Description = {this.state.ListDescription}\n                /> : null}\n                <span className='EmptySpace'> </span>\n                {this.state.user === \"me\" ? <button type=\"button\" id='DeleteWholeList' onClick={this.deleteWholeList}> Delete the whole list </button> : null}\n                {/*<button type=\"button\" className='DeleteWholeList' onClick={this.deleteWholeList}> Delete the whole list </button>*/}\n                <span className='EmptySpace'> </span>\n                {this.state.user === \"me\" ? <button type=\"button\" id='EditDescription' onClick={(this.OpenClose3)}> Edit Description </button> : null}\n                {/*<button type=\"button\" className='EditDescription' onClick={(this.OpenClose3)}> Edit Description </button>*/}\n\n            </div>\n        )\n    }\n\n\n    changeEditingRank = (Info)=> {\n        this.setState(\n            {\n                info: Info\n            }\n        )\n        this.OpenClose2()\n    }\n\n    TableRow(info){\n        return(\n            <tr key={uid(info)}>\n                <td className={\"RankRow\"}>\n                    <strong>{info.rank}</strong>\n                </td>\n                <td>\n                    <div className={\"NameRow\"}>\n                        <strong>{info.foodName}</strong>\n                    </div>\n                </td>\n                <td>\n                    <div className={\"NoteRow\"}>\n                        {info.notes}\n                    </div>\n                </td>\n                {\n                    this.state.user === \"me\" ?\n                        <td className={\"EditRow\"}>\n                            <button type=\"button\" className='editIndividualList'\n                                    onClick={() => this.changeEditingRank(info)}\n                            > edit </button>\n                        </td> : null\n                }\n                {\n                    this.state.user === \"me\" ?\n                        <td className={\"DeleteRow\"}>\n                            <button type=\"button\" className='deleteIndividualList'\n                                    onClick = {\n                                        () => this.removeFoodRank(info)\n                                    }\n                            > delete </button>\n                        </td> : null\n                }\n                {/*<td>*/}\n                {/*    <button type=\"button\" className='editIndividualList'*/}\n                {/*            onClick={() => this.changeEditingRank(info)}*/}\n                {/*    > edit </button>*/}\n                {/*</td>*/}\n                {/*<td>*/}\n                {/*    <button type=\"button\" className='deleteIndividualList'*/}\n                {/*            onClick = {*/}\n                {/*                () => this.removeFoodRank(info)*/}\n                {/*            }*/}\n                {/*    > delete </button>*/}\n                {/*</td>*/}\n            </tr>\n        )\n    }\n\n\n    Table(){\n        return(\n            <table>\n                <tbody>\n                <tr>\n                    <th>Rank</th>\n                    <th>FoodName</th>\n                    <th>Notes</th>\n                    {this.state.user === \"me\" ?  <th>Edit</th>: null}\n                    {/*<th>Edit</th>*/}\n                    {this.state.user === \"me\" ?  <th>Delete</th>: null}\n                    {/*<th>Delete</th>*/}\n                </tr>\n                {this.state.FoodRank.map(info => {return this.TableRow(info)})}\n                </tbody>\n            </table>\n        )\n    }\n\n\n\n\n    // deleteFreeSticker(id){\n    //     console.log(\"Deleteing\")\n    //     const freeStickers = this.state.freeStickers\n    //     let filtered = freeStickers.filter(fs => fs.id.toString() !== id)\n    //     console.log(filtered)\n    //     this.setState({\n    //         freeStickers: filtered\n    //     })\n    // }\n    //\n    //\n    //\n    // click = (event)=>{\n    //     const target = event.target\n    //     const type = target.type\n    //     const className = target.className\n    //\n    //     if(className === 'freeSticker'){\n    //         const targetID = target.id\n    //         this.deleteFreeSticker(targetID)\n    //     }\n    //\n    //     if (type !== 'button' && this.state.selectedImage != null && className !== 'sticker'){\n    //         let x = event.clientX\n    //         let y = event.clientY\n    //         const length = this.state.freeStickers.length\n    //         let ID = 0\n    //         if (length !== 0){\n    //             ID = this.state.freeStickers[length - 1].id + 1\n    //         }\n    //         const freeSticker = {\n    //             id: ID,\n    //             location: [x, y],\n    //             source: this.state.selectedImage\n    //         }\n    //         let existingFreeStickers = this.state.freeStickers\n    //         existingFreeStickers.push(freeSticker)\n    //         this.setState({\n    //             freeStickers: existingFreeStickers,\n    //             selectedImage: null\n    //\n    //         })\n    //\n    //     }\n    // }\n    //\n    // freeSticker(fs) {\n    //     const id = fs.id\n    //     const stringID = id.toString()\n    //     const source = fs.source\n    //     const x = fs.location[0]\n    //     const y = fs.location[1]\n    //     let left = (x - 25)+ 'px';\n    //     let top = (y - 25) + 'px';\n    //     let sticker = document.createElement(\"IMG\");\n    //     sticker.src =source\n    //     sticker.alt = \"iamge not found\"\n    //     sticker.key = uid(fs)\n    //     sticker.id = stringID\n    //     sticker.className = 'freeSticker'\n    //     sticker.style.left = left\n    //     sticker.style.top = top\n    //     sticker.style.position = \"absolute\"\n    //\n    //     return (\n    //         ReactHtmlParser(sticker.outerHTML)\n    //     )\n    //\n    // }\n    //\n    // FreeStickers(){\n    //     const freeStickers = this.state.freeStickers\n    //     return(\n    //             <div>\n    //                 { freeStickers.map(fs => this.freeSticker(fs))}\n    //             </div>\n    //\n    //\n    //             )\n    // }\n    //\n    // selectImage= (event)=> {\n    //     event.preventDefault()\n    //     console.log(\"I am selecting a sticker\")\n    //     const target = event.target\n    //     const source = target.src\n    //     console.log(source)\n    //     this.setState({\n    //         selectedImage: source\n    //     })\n    //\n    //\n    // }\n    //\n    // sticker(s){\n    //\n    //     return(\n    //         <div className='stickerDiv' key={uid(s)}>\n    //             <img src={this.state.stickers[s.id].source } alt='No image'  className='sticker'\n    //                  onClick={this.selectImage}/>\n    //             <span className='EmptySpace'> </span>\n    //         </div>\n    //\n    //     )\n    // }\n    //\n    //\n    //\n    //\n    //\n    // StickerList(){\n    //     return(\n    //         <div className='stickerList'>\n    //             {this.state.stickers.map(s => this.sticker(s))}\n    //\n    //         </div>\n    //\n    //     )\n    // }\n    //\n    //\n    //\n    // StickerPanel(){\n    //     return(\n    //         <div className='StickerPanel'>\n    //             <h2> Choose Your Stickers</h2>\n    //             <p> Choose by clicking the image and the position that the sticker should go and deleting by clicking again</p>\n    //             {this.StickerList()}\n    //             <p>Stickers can only go to the header, List Description, item table and sticker panel</p>\n    //         </div>\n    //     )\n    // }\n\n\n\n    render() {\n        return(\n            <div onClick={this.click}>\n                {/*<Link to={'/Main'}>*/}\n                {/*    <div><button className='back'>Back</button></div>*/}\n                {/*</Link>*/}\n                {this.Header()}\n                <br/>\n\n                {this.Table()}\n                {this.ListDescription()}\n                {/*{this.StickerPanel()}*/}\n                {/*{this.FreeStickers()}*/}\n\n            </div>\n        )\n    }\n}\n\nclass NewRankPopup extends React.Component{\n    state = {\n        FoodName: \"\",\n        Rank: \"\",\n        Note: \"\"\n    }\n\n    handleChange = (event) => {\n        const target = event.target\n        const value = target.value\n        const name = target.name\n\n        this.setState({\n            [name]: value\n        })\n    }\n\n    FoodNameForm(){\n        return(\n            <form className=\"FoodNameForm\">\n                <label>\n                    <strong>Food Name:  </strong>\n                    <input type=\"text\" name=\"FoodName\" value = {this.state.FoodName}\n                           onChange={this.handleChange} className=\"FoodNameInputBox\"\n                    />\n                </label>\n            </form>\n        )\n    }\n\n    RankForm(){\n        return(\n            <form className=\"RankForm\">\n                <label>\n                    <strong>{\"Rank:                      \"}</strong>\n                    <input type=\"text\" name=\"Rank\" value = {this.state.rank} className=\"RankInputBox\"\n                           onChange={this.handleChange}\n                    />\n                </label>\n            </form>\n        )\n    }\n    NoteForm(){\n        return(\n            <form className=\"NoteForm\">\n                <label>\n                    <strong>Note:  </strong>\n                    <br/>\n                    <textarea  name=\"Note\" value = {this.state.Note} className=\"NoteInputBox\"\n                               onChange={this.handleChange} rows=\"5\" cols=\"10\" wrap=\"soft\">\n                    </textarea>\n                </label>\n            </form>\n        )\n    }\n\n    Header(){\n        return(\n            <div className=\"PopUpWindowHeader\">\n                <h2>Add a new Item to the list</h2>\n            </div>\n\n        )\n    }\n\n\n\n    render(){\n        return(\n            <div className=\"PopUpWindow\">\n                {this.Header()}\n                <br />\n                {this.FoodNameForm()}\n                <br />\n                {this.RankForm()}\n                <br />\n                {this.NoteForm()}\n                <br />\n                <div className=\"ButtonArray\">\n                    <button type=\"button\" onClick={()=>this.props.addNewItem(this.state)}>submit</button>\n                    <span className='EmptySpace'> </span>\n                    <button type=\"button\" onClick={this.props.OpenClose}> Cancel </button>\n                </div>\n\n            </div>\n    )\n    }\n}\n\nclass EditRankPopup extends React.Component{\n    state = {\n        FoodName: this.props.Info.FoodName,\n        Notes: this.props.Info.Notes,\n        Rank: this.props.Info.Rank\n    }\n    handleChange = (event) => {\n        const target = event.target\n        const value = target.value\n        const name = target.name\n\n        this.setState({\n            [name]: value\n        })\n    }\n\n    Header(){\n        return(\n            <div className=\"PopUpWindowHeader\">\n                <h2>Edit this item</h2>\n            </div>\n\n        )\n    }\n\n    NoteForm(){\n        return(\n            <form className=\"NoteForm\">\n                <label>\n                    <strong>Note:  </strong>\n                    <br/>\n                    <textarea name=\"Notes\" value = {this.state.Notes} className=\"NoteInputBox\"\n                                          onChange={this.handleChange} rows=\"5\" cols=\"10\" wrap=\"soft\">\n                    </textarea>\n                </label>\n            </form>\n        )\n    }\n\n    FoodNameForm(){\n        return(\n            <form className=\"FoodNameForm\">\n                <label>\n                    <strong>Food Name:  </strong>\n                    <input type=\"text\" name=\"FoodName\" value = {this.state.FoodName}\n                           onChange={this.handleChange} className=\"FoodNameInputBox\"\n                    />\n                </label>\n            </form>\n        )\n    }\n\n    render(){\n        return(\n            <div className=\"PopUpWindow\">\n                {this.Header()}\n                <br />\n                {this.FoodNameForm()}\n                <br />\n                {this.NoteForm()}\n                <br />\n                <div className=\"ButtonArray\">\n                    <button type=\"button\" onClick={()=>this.props.editItem(this.state, this.props.Info._id)}>submit</button>\n                    <span className='EmptySpace'> </span>\n                    <button type=\"button\" onClick={this.props.OpenClose}> Cancel </button>\n                </div>\n            </div>\n        )\n    }\n}\n\nclass EditDescription extends React.Component{\n    state = {\n        Description: this.props.Description\n    }\n\n    handleChange = (event) => {\n        const target = event.target\n        const value = target.value\n        const name = target.name\n\n        this.setState({\n            [name]: value\n        })\n    }\n\n    Header(){\n        return(\n            <div className=\"PopUpWindowHeader\">\n                <h2>Edit List Description</h2>\n            </div>\n        )\n    }\n\n    DescriptionForm(){\n        return(\n            <form className=\"DescriptionForm\">\n                <label>\n                    <strong>New description:  </strong>\n                    <br/>\n                    <br/>\n                    <textarea name=\"Description\" value = {this.state.description}\n                              onChange={this.handleChange} className=\"DescriptionInputBox\" rows=\"5\" cols=\"10\" wrap=\"soft\"> </textarea>\n                </label>\n            </form>\n        )\n    }\n\n    render() {\n        return(\n            <div className=\"PopUpWindow\">\n                {this.Header()}\n                <br />\n                {this.DescriptionForm()}\n                <br />\n                <div className=\"ButtonArray\">\n                    <button type=\"button\" onClick={()=>this.props.editDescription(this.state.Description)}>submit</button>\n                    <span className='EmptySpace'> </span>\n                    <button type=\"button\" onClick={this.props.OpenClose}> Cancel </button>\n                </div>\n            </div>\n        )\n    }\n\n}\n\n\nexport default IndividualList;"]},"metadata":{},"sourceType":"module"}